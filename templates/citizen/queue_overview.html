{% extends 'base.html' %}
{% block title %}Queue — {{ service.name }}{% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Queue: {{ service.name }}</h1>
        <p>{{ branch.name }}</p>
    </div>
    <div class="stat-grid mb-3">
        <div class="stat-card"><div class="stat-value">{{ waiting_count }}</div><div class="stat-label">Waiting</div></div>
        <div class="stat-card"><div class="stat-value">{{ serving_tickets.count }}</div><div class="stat-label">Serving</div></div>
    </div>
    {% if serving_tickets %}
    <div class="card mb-2">
        <h3 style="color:var(--primary-light);margin-bottom:1rem;">⚡ Serving Now</h3>
        <div class="flex-wrap">
            {% for t in serving_tickets %}<span class="status-badge status-serving" style="font-size:1.5rem;margin:0.25rem;">#{{ t.token_number }}</span>{% endfor %}
        </div>
    </div>
    {% endif %}
    {% if waiting_tickets %}
    <div class="card">
        <h3>⏳ Waiting Line</h3>
        <table style="width:100%">
            <thead><tr><th>Pos</th><th>Token</th><th>Time</th></tr></thead>
            <tbody>
                {% for t in waiting_tickets %}
                <tr><td>#{{ t.position }}</td><td><strong>#{{ t.token_number }}</strong></td><td>{{ t.joined_at|date:"h:i A" }}</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>
{% endblock %}